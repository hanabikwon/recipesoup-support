# Episode 1: "감정 기반 레시피 앱, 왜 만들었나?"

**작성일**: 2025-10-08
**개발 기간**: 2025-08-28 ~ 2025-08-31 (4일)
**주요 키워드**: #프로젝트동기 #MVP기획 #기술스택선정 #초기설계

---

## 🍳 프롤로그: 요리하는 사람의 마음

"오늘 뭐 먹지?"

이 질문은 단순해 보이지만, 요리하는 사람에게는 훨씬 더 깊은 의미를 담고 있다. 우리는 배가 고파서만 요리하지 않는다. 누군가를 위해, 기념일을 축하하기 위해, 혹은 힘든 하루를 위로하기 위해 음식을 만든다.

하지만 기존의 레시피 앱들은 어떤가? 재료와 조리법, 칼로리와 영양소... 모두 중요하지만, 정작 **"왜 이 요리를 만들었는가"**라는 가장 중요한 이야기는 빠져있었다.

2025년 8월 28일, 나는 이런 생각을 하며 새로운 프로젝트를 시작했다.

---

## 💡 왜 만들었는가? - 프로젝트 동기

### 1. 레시피 앱의 공백을 발견하다

기존 레시피 앱들의 문제점:
- **정보 중심**: 재료, 조리법, 칼로리만 저장
- **감정 부재**: 왜 만들었는지, 누구를 위해 만들었는지 기록할 곳이 없음
- **관계 단절**: 요리라는 행위에 담긴 사람과 사람 사이의 이야기가 사라짐

> "단순히 요리 방법을 저장하는 게 아니라, **이 요리를 왜 만들었는지, 누구를 위해 만들었는지**를 함께 기록하는 감성 기반 레시피 저장소가 필요하다."

이것이 Recipesoup의 출발점이었다.

### 2. 타겟 사용자 정의

프로젝트 초기에 명확히 한 3가지 타겟:

1. **요리를 마음 표현의 수단으로 여기는 사람**
   - 요리가 단순한 생존이 아닌, 감정 표현의 도구인 사람들

2. **누군가를 위해 요리하며 기억을 남기고 싶은 사람**
   - 가족, 연인, 친구... 소중한 사람을 위한 요리의 순간을 기록하고 싶은 사람들

3. **레시피를 숫자와 재료가 아닌 기억과 감정으로 기록하고 싶은 사람**
   - "300g의 돼지고기"보다 "엄마가 해주던 그 맛"을 기억하고 싶은 사람들

### 3. 핵심 가치 설정

**"요리하는 사람의 마음까지 남기는 공간"**

- 단순 정보 저장이 아닌, **감정과 이야기의 아카이빙**
- 레시피 = 재료 + 조리법 + **감정 메모** + **관계**
- 삶의 순간들을 요리를 통해 기록하는 개인 다이어리

---

## 🎯 MVP 요구사항 정의

### 핵심 기능 4가지 결정

초기 기획 단계(8월 28일)에서 다음 4가지 핵심 기능을 확정했다:

#### 1. 레시피 작성 및 감정 메모 기록
```
사용자 스토리:
"요리의 재료와 조리 방법뿐만 아니라, 왜 이 요리를 만들었는지,
누구를 위해 만들었는지, 그리고 당시의 감정이나 상황을
한 줄 메모로 함께 기록할 수 있다."
```

**설계 결정사항** (8월 28일 Q&A 세션):
- Recipe 모델에 `emotionalStory` 필드 추가
- 감정 상태를 Enum 타입으로 정의 (Mood: happy, sad, peaceful, tired 등)
- 평점 시스템 포함 (1-5점, 개인 만족도)

#### 2. AI 음식 분석 및 날짜 자동 기록
```
사용자 스토리:
"선택적으로 음식 사진을 AI로 분석하여 레시피를 자동 추천받을 수 있다.
사진은 분석 후 즉시 삭제되며 저장되지 않는다."
```

**기술적 결정**:
- OpenAI GPT-4o-mini API 사용 (Vercel 프록시 경유)
- **보안 우선 설계**: API 키는 Vercel 서버리스 환경변수에서만 관리
- 클라이언트는 프록시 토큰만 사용 (API 키 노출 방지)

#### 3. 자유로운 재료·방법 입력 및 태그 기능
```
설계 원칙:
"복잡한 구조 없이, 재료와 만드는 법을 자유롭게 입력할 수 있고
상황에 맞는 감성 태그를 추가하여 감정 기준으로 탐색할 수 있다."
```

**구현 방향**:
- 재료: 구조화된 리스트 (Ingredient 모델)
- 조리법: 단계별 자유 텍스트
- 태그: `#파티` `#혼밥` `#기념일` 등 감성 중심

#### 4. 레시피 리스트 및 상세 보기
```
UX 목표:
"기록된 레시피들은 카드형 목록으로 정리되며,
감정과 기억의 흐름을 시각적으로 돌아볼 수 있는
개인 아카이브 역할을 한다."
```

---

## 🛠️ 기술 스택 선정 이유

### 왜 Flutter인가?

**선택 이유**:
1. **크로스 플랫폼**: iOS/Android 동시 지원
2. **빠른 개발**: Hot Reload로 MVP 빠르게 구현
3. **Material Design 3**: 빈티지 아이보리 테마 구현에 적합

**대안 검토**:
- React Native ❌ → 성능 이슈 및 네이티브 모듈 복잡도
- Swift/Kotlin ❌ → 크로스 플랫폼 불가능

### 왜 OpenAI API인가?

**선택 이유**:
1. **GPT-4o-mini**: 이미지 분석 성능 우수
2. **한국어 지원**: OCR 및 레시피 분석에 강점
3. **빠른 응답**: 평균 3-5초 내 분석 완료

**중요한 설계 결정 (8월 30일)**:
```
Vercel 프록시 아키텍처 채택
├── 클라이언트 (Flutter) → x-app-token 헤더로 인증
├── Vercel 서버리스 함수 → OpenAI API 호출
└── OpenAI API 키는 Vercel 환경변수에서만 관리
```

**보안 이점**:
- ✅ API 키가 클라이언트 코드에 노출되지 않음
- ✅ 앱 전용 토큰으로 접근 제어
- ✅ Rate Limiting 서버 측에서 관리 가능

### 왜 Hive인가?

**로컬 저장소 선택 이유**:
1. **심플함**: SQLite보다 단순한 NoSQL
2. **빠른 성능**: JSON 기반 직렬화
3. **오프라인 우선**: 네트워크 없이 완전 독립 동작

**대안 검토**:
- SQLite ❌ → 스키마 관리 복잡도
- SharedPreferences ❌ → 대용량 데이터 처리 부적합
- Supabase/Firebase ❌ → 개인 아카이빙 서비스에 클라우드 불필요

**설계 철학**:
> "모든 데이터는 사용자 기기에만 저장된다. 로그인 없음, 클라우드 없음."

---

## 📋 초기 설계 과정

### 8월 28일: 핵심 질문과 답변

프로젝트 시작 시 Claude와 진행한 Q&A 세션에서 중요한 결정들이 이루어졌다:

#### Q1: Recipe 모델의 핵심 필드는?

```dart
class Recipe {
  String id;
  String title;
  String emotionalStory;  // ⭐ 핵심! 감정 메모
  List<Ingredient> ingredients;  // 구조화된 재료 리스트
  List<String> instructions;     // 단계별 조리법
  String? localImagePath;         // 로컬 저장 경로
  List<String> tags;
  DateTime createdAt;
  Mood mood;              // ⭐ 핵심! 감정 상태
  int? rating;            // 개인 만족도
}
```

**결정 이유**:
- `emotionalStory`: 왜 만들었는지의 이야기를 담는 핵심 필드
- `Mood` enum: 8가지 감정 상태로 분류 (happy, sad, peaceful, tired, excited, nostalgic, comfortable, grateful)
- 로컬 이미지만 저장 (사진 분석 후 AI 데이터는 저장 안 함)

#### Q2: 감정 상태 데이터는 어떻게?

**선택**: Enum 타입으로 정의된 감정 카테고리 (B안)

```dart
enum Mood {
  happy('😊', '기쁨', 'happy'),
  sad('😢', '슬픔', 'sad'),
  peaceful('😌', '평온', 'peaceful'),
  tired('😴', '피로', 'tired'),
  excited('🤩', '설렘', 'excited'),
  nostalgic('🥺', '그리움', 'nostalgic'),
  comfortable('☺️', '편안함', 'comfortable'),
  grateful('🙏', '감사', 'grateful');
}
```

**장점**:
- 감정별 이모지, 한국어, 영어 매핑
- 통계 분석에 용이
- UI에서 감정별 색상/아이콘 일관성 유지

#### Q3: OpenAI API를 언제, 어떻게?

**선택**: 요리 사진 기반 재료/조리법 추천 (C안)

**중요한 제약**:
- 사진은 **분석 후 즉시 삭제** (저장 안 함)
- AI 분석 결과는 **임시적 사용**만
- 개인 아카이빙이 목적이므로 AI 의존도 최소화

#### Q4: 상태관리 패턴은?

**선택**: Provider + ChangeNotifier (최대한 심플)

**이유**:
- Riverpod/Bloc보다 학습 곡선 낮음
- MVP 빠른 구현에 적합
- Flutter 공식 권장 패턴

#### Q5: 로컬 데이터베이스는?

**선택**: Hive (NoSQL)

**이유**:
- JSON 직렬화가 Recipe 모델과 잘 맞음
- SQLite보다 설정 간단
- 오프라인 완전 독립

---

## 🎨 디자인 방향 설정

### 빈티지 아이보리 테마 선택

**컨셉**: "요리하는 사람의 따뜻한 마음"

**색상 팔레트**:
```dart
primaryColor: #8B9A6B      // 연한 올리브 그린
backgroundColor: #FAF8F3   // 아이보리 백그라운드
cardColor: #F8F6F1         // 따뜻한 아이보리
accentOrange: #D2A45B      // 빈티지 오렌지 (강조)
textPrimary: #2E3D1F       // 다크 올리브 (메인 텍스트)
```

**디자인 특징**:
1. **빈티지 일러스트 스타일**: 유럽 감성의 과일·채소 일러스트
2. **따뜻한 색감**: 베이지, 올리브, 크림 화이트, 브라운 중심
3. **카드형 레이아웃**: 시간순 정렬로 감정 흐름 파악

**선택 이유**:
- 감정 회고에 집중할 수 있는 시각적 안정성
- 요리와 자연을 연결하는 유기적 느낌
- 사용자 피로도 낮은 부드러운 색감

### UI 구조 결정

**Bottom Navigation 기반 5탭**:
```
├── 홈 (최근 레시피 + 통계 요약)
├── 검색 (감정/태그 기반)
├── 통계 (감정 분포 분석)
├── 보관함 (폴더별 정리)
└── 설정 (프로필 + 백업)
```

**FAB (Floating Action Button)**:
- 빈티지 오렌지 색상
- 확장 메뉴: 📝 빠른 작성, 📷 사진 작성, 🔤 키워드 입력

---

## 🔐 보안 설계

### Vercel 프록시 아키텍처 (8월 30일 구축)

**문제 인식**:
> "Flutter 클라이언트에서 직접 OpenAI API 호출 시 CORS 에러 발생"
> "API 키를 앱에 포함하면 보안 위험"

**해결책**: Vercel 서버리스 함수를 프록시로 사용

```
┌─────────────┐
│ Flutter App │
│ (Client)    │ x-app-token 헤더
└──────┬──────┘
       │
       ▼
┌─────────────────────┐
│ Vercel Serverless   │
│ (Proxy)             │ OPENAI_API_KEY (환경변수)
└──────┬──────────────┘
       │
       ▼
┌─────────────┐
│ OpenAI API  │
└─────────────┘
```

**보안 체크리스트**:
- ✅ OpenAI API 키는 Vercel 환경변수에서만 관리
- ✅ 클라이언트는 프록시 토큰만 포함
- ✅ x-app-token 헤더 기반 앱 전용 접근 제어
- ✅ `.gitignore`에 모든 환경변수 파일 보호
- ✅ 프로덕션 빌드에서도 API 키 노출 없음

**구현 완료** (8월 30일):
- Vercel 프로젝트 생성: `recipesoup-proxy`
- 서버리스 함수 배포 완료
- Flutter 클라이언트 연동 테스트 성공

---

## 📊 MVP 범위 정의

### Phase 0-1: 프로젝트 초기 설정 (8월 28-31일)

**완료 항목**:
- [x] Flutter 프로젝트 생성
- [x] 폴더 구조 설계
  ```
  lib/
  ├── config/        # API 설정, 테마
  ├── models/        # Recipe, Ingredient, Mood
  ├── services/      # OpenAI, Hive
  ├── screens/       # 화면들
  ├── widgets/       # 공통 컴포넌트
  ├── providers/     # 상태 관리
  └── utils/         # 유틸리티
  ```
- [x] 패키지 의존성 추가
  - provider (상태 관리)
  - dio (네트워킹)
  - hive, hive_flutter (로컬 저장)
  - image_picker, image (이미지 처리)
  - flutter_dotenv (환경변수)
- [x] Vercel 프록시 설정
- [x] iOS/Android 권한 설정 (카메라, 사진 라이브러리)

### 설계 문서 작성

**초기 4일간 작성된 문서**:
- `CLAUDE.md`: 프로젝트 개요 및 작업 가이드
- `ARCHITECTURE.md`: 시스템 구조, API 명세
- `DESIGN.md`: 빈티지 아이보리 테마 정의
- `PROGRESS.md`: 개발 진행 상황 (Phase별 구조)

---

## 💭 회고: 첫 4일의 교훈

### 잘한 점

1. **명확한 타겟 정의**
   - "감정 기반"이라는 핵심 가치를 처음부터 분명히 함
   - 기존 레시피 앱과의 차별점 확보

2. **보안 우선 설계**
   - Vercel 프록시로 API 키 보호
   - 클라이언트-서버 분리 아키텍처

3. **심플함 추구**
   - Provider (상태관리)
   - Hive (로컬 DB)
   - Navigator 1.0 (네비게이션)
   - "최대한 심플한 것으로 구현" 원칙 고수

4. **철저한 사전 설계**
   - Q&A 세션으로 모든 핵심 결정 사항 문서화
   - 나중에 혼란 최소화

### 아쉬운 점

1. **네이버 블로그 스크래핑 도전**
   - 초기에 URL 파싱 기능 구현 시도
   - RSS, 모바일 버전, HTML 구조 분석... 복잡도 예상 이상
   - 결국 후순위로 미룸 (Episode 2 이후 재도전)

2. **UI 안내 문구 이슈**
   - 초기 구현 시 `\n` 이스케이프 문자 그대로 표시
   - 사소하지만 사용자 경험에 영향

---

## 🎯 다음 단계 예고

**Episode 2 (9월 1일): "MVP 하루 만에 만들기"**

다음 에피소드에서는:
- ✨ **하루 만에 MVP 완성** 과정
- 🤖 **OpenAI API 실제 연동** (이미지 분석)
- 📱 **레시피 작성/저장/목록** 기능 구현
- 💾 **Hive 로컬 DB** 세팅
- 🎨 **빈티지 테마** 적용

가장 중요한 것은 **AI 기능 연결 상세 작업**:
- OpenAI Vision API 연동 과정
- CORS 이슈와 Vercel 프록시 구축
- 이미지 분석 결과 파싱
- UI/UX 개선 (로딩, 피드백, 재시도)

---

## 📌 핵심 요약

### 프로젝트 동기
- 기존 레시피 앱의 공백: 감정과 이야기 부재
- **"요리하는 사람의 마음까지 남기는 공간"** 필요

### MVP 핵심 기능
1. 감정 메모와 함께 레시피 기록
2. AI 음식 분석 (선택적, 임시적)
3. 자유로운 재료·방법 입력 + 감성 태그
4. 카드형 레시피 리스트 및 상세보기

### 기술 스택
- **Flutter**: 크로스 플랫폼, 빠른 개발
- **OpenAI API**: GPT-4o-mini (Vercel 프록시 경유)
- **Hive**: 심플한 NoSQL 로컬 저장
- **Provider**: 최대한 심플한 상태 관리

### 디자인
- **빈티지 아이보리 테마**: 따뜻하고 감성적
- **Bottom Navigation**: 5탭 구조
- **감정 중심 UI**: 이모지, 색상, 태그

### 보안
- **Vercel 프록시**: API 키 서버 측 관리
- **클라이언트 토큰**: x-app-token 인증
- **완전 로컬**: 사용자 데이터는 기기에만

---

**다음 편에서 계속됩니다...**

> "하루 만에 MVP를 완성하고, AI가 음식 사진을 분석하는 마법 같은 순간을 경험하다."

---

*이 글은 Recipesoup 개발기 시리즈의 첫 번째 에피소드입니다.*
*실제 개발 과정의 대화 기록과 프로젝트 문서를 바탕으로 작성되었습니다.*
